{
  "ConnectionStrings": {
    "DefaultConnection": "User ID=postgres;Password=993;Server=localhost;Port=5432;Database=Library"
  },
  "Serilog": {
    "Using": [ "Serilog", "Serilog.Sinks.PostgreSQL", "Serilog.Expressions", "Serilog.Sinks.PostgreSQL.Configuration" ],
    "Enrich": [ "FromLogContext", "WithMachineName" ],
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} [{Level}] [{MachineName}] - {Message}{NewLine}{Exception}"
        }
      },
      {
        "Name": "Logger",
        "Args": {
          "configureLogger": {
            "Filter": [
              {
                "Name": "ByIncludingOnly",
                "Args": {
                  "expression": "@l in ['Error']"
                }
              }
            ],
            "WriteTo": [
              {
                "Name": "File",
                "Args": {
                  "path": "log.txt",
                  "rollingInterval": "Day",
                  "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} [{Level}] [{MachineName}] - {Message}{NewLine}{Exception}"
                }
              }
            ]
          }
        }
      },
      {
        "Name": "Logger",
        "Args": {
          "configureLogger": {
            "Filter": [
              {
                "Name": "ByIncludingOnly",
                "Args": {
                  "expression": "@l in ['Error']"
                }
              }
            ],
            "WriteTo": [
              {
                "Name": "PostgreSQL",
                "Args": {
                  "connectionString": "User ID=postgres;Password=993;Server=localhost;Port=5432;Database=Library",
                  "tableName": "Logs",
                  "needAutoCreateTable": true,
                  "configurationPath": "ColumnsSectionHolder:AnotherSubSection"
                }
              }
            ]
          }
        }
      }
    ]
  },
  "ColumnsSectionHolder": {
    "AnotherSubSection": {
      "Columns": {
        "message": "RenderedMessageColumnWriter",
        "message_template": "MessageTemplateColumnWriter",
        "level": {
          "Name": "LevelColumnWriter",
          "Args": {
            "renderAsText": true,
            "dbType": "Varchar"
          }
        },
        "raise_date": "TimestampColumnWriter",
        "exception": "ExceptionColumnWriter",
        "properties": "LogEventSerializedColumnWriter",
        "prop_test": {
          "Name": "PropertiesColumnWriter",
          "Args": { "dbType": "Json" }
        },
        "machine_name": {
          "Name": "SinglePropertyColumnWriter",
          "Args": {
            "propertyName": "MachineName",
            "writeMethod": "Raw"
          }
        }
      }
    }
  },
  "AllowedHosts": "*"
}

